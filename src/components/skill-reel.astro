---
import SkillBox from "./skill-box.astro";
import Next from "./next.astro";
import { skills } from "../pages/api/skills.ts";
const idList = skills.map((skill) => skill.id);
let current = 0;
const currentSkill = skills[current];
---

<div class='skill-reel' data-skillids={idList}>
  <Next next='false' />
  <!-- {
    (skills ?? []).map((skill, index) => {
      return (
        <SkillBox
          id={skill.id}
          title={skill.title}
          description={skill.description}
          skills={skill.skills}
          active={index === 0}
        />
      );
    })
  } -->
  <SkillBox
    client:load
    id={skills[current].id}
    title={skills[current].title}
    description={skills[current].description}
    skills={skills[current].skills}
    active={true}
  />
  <Next next='true' />
</div>
<script type='module' define:vars={{ ids: idList }}>
  let current = 0;

  function updateSkill(direction) {
    current += direction;
    console.log(current);
  }

  document.getElementById("next-button-next").addEventListener("click", () => updateSkill(1));
  document.getElementById("next-button-previous").addEventListener("click", () => updateSkill(1));
  // document.addEventListener("DOMContentLoaded", (event) => {
  //   const elements = ids.map((id) => document.getElementById(id));
  //   let current = 0;

  //   // next
  //   document.getElementById("next-button-next").addEventListener("click", () => {
  //     const nextElement = current + 1 > elements.length - 1 ? 0 : current + 1;
  //     elements[current].classList.remove("active");
  //     elements[current].classList.add("inactive");
  //     elements[nextElement].classList.add("active");
  //     elements[nextElement].classList.remove("inactive");
  //     current = nextElement;
  //   });

  //   // previous
  //   document.getElementById("next-button-previous").addEventListener("click", () => {
  //     const nextElement = current - 1 < 0 ? 2 : current - 1;
  //     elements[current].classList.remove("active");
  //     elements[current].classList.add("inactive");
  //     elements[nextElement].classList.add("active");
  //     elements[nextElement].classList.remove("inactive");
  //     current = nextElement;
  //   });
  // });
</script>
<style>
  .skill-reel {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    justify-content: center;
    width: 100%;
    height: 100%;
  }
</style>
